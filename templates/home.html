{% extends '_base.html' %}

{% block body %}
  {% include 'recipes/search.html' %}
  <p>ingredients:</p>
  <ul id="ingredient-list"></ul>

  {% if recipes %}
    <h3>recipes found:</h3>
    {% for recipe in recipes %}
      <p>{{ recipe }}</p>
    {% endfor %}

  {% endif %}
{% endblock %}

{% block scripts %}
  <script>
      let ingredient_search = document.getElementById("ingredient-search");
      let available_ingredients = Array.from(document.getElementById("ingredients").children);
      let selected_ingredients = [];

      function append_ingredient_to_list() {
          let ingredient = ingredient_search.value;
          selected_ingredients.push(ingredient);
          available_ingredients.find(elem => elem.value === ingredient).remove();

          add_to_ingredient_list(ingredient);
          ingredient_search.value = "";
      }

      let ingredients_ul = document.getElementById("ingredient-list");
      function add_to_ingredient_list(ingredient) {
          let new_li = document.createElement("li");
          new_li.innerHTML = ingredient;
          ingredients_ul.appendChild(new_li);
      }

      function set_ingredients(e) {
        ingredient_search.value = selected_ingredients.join(",");
      }
  </script>
{% endblock %}